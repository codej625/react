# Server component

<br />
<br />

* 서버 컴포넌트 (Server Component)
---

```
리액트 서버 컴포넌트는 서버에서 렌더링 되고 실행되는 새로운 형태의 리액트 컴포넌트이다.

컴포넌트가 서버에서 실행되므로 데이터베이스,
파일 시스템 등 서버 리소스에 직접 접근이 가능하다.
(API 호출 없이 바로 데이터를 가져올 수 있다.)

서버에서 실행되므로 클라이언트로
JavaScript 코드를 전송할 필요가 없어서,
클라이언트의 번들 크기가 줄어든다.
```

<br />
<br />
<br />
<br />


* 주의 사항
---

1. 서버 컴포넌트에는 브라우저에서 실행될 코드가 포함되면 안된다.

```
CSR 시 사용하는 React Hook이라든지,
이벤트 핸들러는 사용하면 안 된다.

오직 서버에서만 작동하는 코드가 적혀 있어야 한다.
특히 브라우저에서 실행되는 기능을 담고 있는 라이브러리도 조심해야 한다.
```

<br />
<br />
<br />

2. 클라이언트 컴포넌트는 클라이언트에만 실행되지 않는다.

||클라이언트 컴포넌트|서버 컴포넌트|
|-|-|-|
|1|사전 렌더링을 위해 서버에서 **한 번** 실행|**서버측에서만** 실행되는 컴포넌트|
|2|하이드레이션을 위해 브라우저에서 **한 번** 실행||
|3|**서버**와 **클라이언트** 모두에서 실행 됨||

<br />
<br />
<br />

3. 클라이언트 컴포넌트에서 서버 컴포넌트를 Import 할 수 없다.

```
"use client" 지시어를 사용한 클라이언트 컴포넌트에서,
서버 컴포넌트를 Import 한다면, 자동으로 클라이언트 컴포넌트로 변환된다.
(한 마디로 손해를 본다는 뜻)

반드시 클라이언트 컴포넌트에서 서버 컴포넌트를 사용해야 한다면,
Import가 아닌 Prop으로 전달해 사용할 수 있다.

이렇게하면 서버 컴포넌트의 결과물만 Children으로 전달할 수 있다.
```

```tsx
// Index component
export default function Home() {
  return (
    <>
      <ClientComponent>
        <ServerComponent />
      <ClientComponent />
    </>
  )
}
```

```tsx
// Client component
export default function ClientComponent({
  children,
}: {
  children: ReactNode;
}) {
  return <>{children}</>
}
```

<br />
<br />
<br />

4. 서버 컴포넌트에서 클라이언트 컴포넌트에게 직렬화 되지 않는 Props는 전달 불가하다.

```
// 직렬화 (Serialization)

객체, 배열 클래스 등의 복잡한 구조의 데이터를
네트워크 상으로 전송하기 위해 아주 단순한 형태(문자열, Byte)로 변환하는 것
```

```js
// person 와 같은 객체를
const person = {
  name: 'codej625',
  age: 35,
}

// 이러한 형태의 Json으로 변환 하는것도 직렬화에 포함된다.
{"name": "codej625", "age": 35}
```

```
하지만 함수는 직렬화가 불가능하므로,
Props로서 전달할 수 없다.
(클로저, 렉시컬 스코프 라던지 그 외
다양한 코드조각을 하고 있기 때문에 직렬화가 불가능)
```
