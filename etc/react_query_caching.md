# 리액트 쿼리의 캐싱

<br />
<br />

* React Query의 기본 작동 원리
---

```
React Query는 데이터를 가져오는 라이브러리이다.

단순히 "요청을 보내고 데이터를 받아오는" 것뿐만 아니라 캐싱(cache)을 통해 효율적으로 관리한다.

캐싱이란, 한 번 가져온 데이터를 메모리에 저장해두고,
같은 요청이 다시 오면 네트워크 요청을 보내지 않고 저장된 데이터를 사용하는 걸 말한다.
```

<br />
<br />
<br />
<br />

1. `queryKey`

```
React Query는 어떤 데이터를 가져올지 식별하기 위해 queryKey라는 고유 키를 사용한다.

queryKey는 배열 형태로 정의되는데,
이 키가 같으면 "이건 같은 데이터야"라고 판단하고 캐시에서 데이터를 꺼내온다.

반대로 queryKey가 다르면 "새로운 데이터야"라고 보고 서버에 새 요청을 보낸다.
```

<br />
<br />
<br />

2. `문제 발생`

```
querystring에 따라 동적으로 변하는 url인 상황에서
queryKey의 값을 어떻게 해야 할까?

아래와 같이 키를 사용한다면,
queryString -> "id=1" 에서 "id=2"으로 변해도 새로운 요청을 하지 않는다.
```

```

queryKey: [`${endpoint}`]

```

<br />

```
하지만 아래와 같이 querystring을 key에 넣어주면,
동적으로 key의 값이 바뀌게 되고 새로운 요청을 한다.
```

```

queryKey: [`${endpoint}`, queryString]

```
